@import "mixins.less";

@grid: 100px;

* {
	.no-smoothing;
}

html, body {
	height: 100%;
	margin: 0; padding: 0;
	overflow: hidden;
}

body {
	.perspective-origin(50%, 0%);
	background: #000;
}

#HUD{
	position: absolute;
	left: 0;
	right: 0;
	height: 50px;
	line-height: 10px;
	padding: 20px;
	background: rgba(0,0,0,.4);
	color: #fff;
	font-family: 'Helvetica Neue';
	font-weight: 300;
	
	.just();
}

#World{
	position: absolute;
	left: 50%;
	top: 50%;
	
	.transform-style(preserve-3d);
}

.x-plane{
	-webkit-filter: brightness(80%);
}

.y-plane{
	-webkit-filter: brightness(90%);
	
	&.negative{
		-webkit-filter: brightness(60%);
	}
}

.room{
	position: absolute;
	left: 0;
	bottom: 0;
	
	.transform-style(preserve-3d);
}

.wall{
	.box-sizing(border-box);
	position: absolute;
	left: 0;
	bottom: 0;

	.transform-origin(0%, 0%);
	&:not(.backface){
		.wf();
	}
	
	&.portal{
		.transition(all 500ms cubic-bezier(0.165, 0.84, 0.44, 1));
	}
}

.floortile{
	position: absolute;
	padding-top: 1px;
	left: 0;
	bottom: 0;
	background-size: 100px !important;
}

.char{
	position: absolute;
	left: 0;
	bottom: 0;
	
	.transform-style(preserve-3d);
}

@playerRotateX: 90deg;

.player{
	.avatar{
		position: absolute;
		left: 50%;
		top: 50%;
		margin-left: -@grid/2;
		width: @grid;
		height: 2*@grid;
		background: red;
		
		.transition(all 200ms);
		.transform-origin(50%, 0%);
		.transform-style(preserve-3d);
		
		.transform(rotateX(@playerRotateX));
		
	
		.down&{
			.transform(rotateX(@playerRotateX) rotateY(180deg));
		}
	
		.right&{
			//.transform(rotateX(@playerRotateX) rotateY(90deg));
		}
	
		.left&{
			//.transform(rotateX(@playerRotateX) rotateY(270deg));
		}
	
		.player[data-room='garage']&{
			background: #fff;
		}
	
		&:after{
			content: '';
			display: block;
			position: absolute;
			left: 0;
			bottom: 0;
			width: @grid;
			height: 0px;
			border-radius: 100%;
			background: rgba(0,0,0,.15);
		
			box-shadow: 0 0 25px 5px rgba(0,0,0,.6);
		
			.transform(rotateX(90deg) translate3d(0, 0, 195px));
		}
	}
}

.furniture,
.furniture .face{
	position: absolute;
	left: 0;
	bottom: 0;
	background: gold;
	
	.transform-style(preserve-3d);
}

.furniture .face{
	background: blue;
	
	.transform-origin(0%, 0%);	
	.wf();
}