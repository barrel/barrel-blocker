@import "mixins.less";

@perspective: 1500px;
@viewAngle: -30deg;

@grid: 100px;

* {
	.box-sizing(border-box);
	.no-smoothing;
}

html, body {
	height: 100%;
	margin: 0; padding: 0;
	overflow: hidden;
}

body {
	.perspective(@perspective);
	.perspective-origin(50%, 0%);
	.transition(250ms);
	
	background: #000;

	&.fade {
		&:after {
			content: "";
			.fill-container;
			background: fadeOut(white, 2%);
		}
	}
}

#HUD{
	position: absolute;
	left: 0;
	right: 0;
	height: 50px;
	line-height: 10px;
	padding: 20px;
	background: rgba(0,0,0,.4);
	color: #fff;
	font-family: 'Helvetica Neue';
	font-weight: 300;
	
	.just();
}

#World{
	position: absolute;
	left: 50%;
	top: 50%;
	background: transparent;
	
	.transform-style(preserve-3d);
}

.room{
	position: absolute;
	
	.transform-style(preserve-3d);
}

.wall{
	position: absolute;
	

	.transform-origin(0%, 0%);
	&:not(.backface){
		.wf();
	}
	
	border: 1px solid #000;
	
	&.x-plane{
		opacity: .5
	}
}

.floortile{
	position: absolute;
}

.char{
	position: absolute;
	left: 0;
	bottom: -@grid;
	
	.transform-style(preserve-3d);
}

@playerRotateX: 90deg;

.player{
	.avatar{
		position: absolute;
		left: 50%;
		top: 50%;
		margin-left: -@grid/2;
		width: @grid;
		height: 2*@grid;
		background: red;
		
		.transition(all 200ms);
		.transform-origin(50%, 0%);
		.transform-style(preserve-3d);
		
		.transform(rotateX(@playerRotateX));
		
	
		.down&{
			.transform(rotateX(@playerRotateX) rotateY(180deg));
		}
	
		.right&{
			.transform(rotateX(@playerRotateX) rotateY(90deg));
		}
	
		.left&{
			.transform(rotateX(@playerRotateX) rotateY(270deg));
		}
	
		.player[data-room='garage']&{
			background: #fff;
		}
	
		&:after{
			content: '';
			display: block;
			position: absolute;
			left: 0;
			bottom: 0;
			width: @grid;
			height: 5px;
			border-radius: 100%;
			background: rgba(0,0,0,.15);
		
			box-shadow: 0 0 30px #000;
		
			.transform(rotateX(90deg) translate3d(0, 0, 195px))
		}
	}
}